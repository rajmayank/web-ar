<html>
<head>
    <script src="assets/js/aframe.min.js"></script>
    <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>
        AFRAME.registerComponent("vidhandler", {
            init: function () {
                this.toggle = false;
                this.vid = document.querySelector("#dna_video");
                this.vid.pause();
            }, tick: function () {
                if (this.el.object3D.visible == true) {
                    if (!this.toggle) {
                        this.toggle = true;
                        this.vid.play();
                    }
                } else {
                    this.toggle = false;
                    this.vid.pause();
                }
            }
        });

        function refrespage() {
            location.reload();
        }
    </script>
</head>
<body style="margin : 0; overflow: hidden;">

<a-scene artoolkit embedded
         arjs='trackingMethod: best; sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
    <a-assets>
        <video preload="auto" id="dna_video" loop="true" crossorigin webkit-playsinline playsinline
               controls>
            <source type="video/webm" src="assets/video/dna_replication.webm">
            <h3>Error : Your browser does not support.</h3>
        </video>
    </a-assets>

    <a-assets>
        <a-asset-item
                id="chartModel"
                src="assets/models/chart.glb">
        </a-asset-item>
    </a-assets>
    <a-assets>
        <a-asset-item
                id="cartModel"
                src="assets/models/car/model.glb">
        </a-asset-item>
    </a-assets>


    <a-marker type="barcode" value="1" vidhandler>
        <a-plane position="0 0.1 0" scale="2.6 2 2" rotation="-90 0 0"
                 material="transparent:true; alphaTest:0; src:#dna_video"></a-plane>
    </a-marker>

    <a-marker type="barcode" value="2">
        <a-box position='0 0.5 0' material='opacity: 0.5; side:double; color:red;'>
            <a-torus-knot radius='0.26' radius-tubular='0.05'
                          animation="property: rotation; to:360 0 0; dur: 5000; easing: linear; loop: true">
            </a-torus-knot>
        </a-box>
    </a-marker>


    <a-marker type="barcode" value="3">
        <a-entity
                id="chartModelEntity"
                gltf-model="#chartModel"
                scale="0.08 0.08 0.08"
                rotation="0 0 0"
                position="0 0 0">
        </a-entity>

        <!--        <a-entity collada-model=”url(assets/models/chart/model.dae)”-->
        <!--                  scale="8 8 8"-->
        <!--                  rotation="0 90 0">-->
        <!--        </a-entity>-->
    </a-marker>


    <a-marker type="barcode" value="4">
        <a-entity id="carModelEntity"
                  gltf-model="#cartModel"
                  scale="1 1 1"
                  rotation="0 0 0"
                  animation="property: rotation; to:0 360 0; dur: 5000; easing: linear; loop: true">
        </a-entity>
    </a-marker>

    <!--    <a-marker type="barcode" value="3">-->
    <!--        <a-entity collada-model=”url(assets/models/shark/model.dae)”-->
    <!--                  scale="1 1 1"-->
    <!--                  rotation="0 90 0">-->
    <!--        </a-entity>-->
    <!--    </a-marker>-->

    <a-entity camera></a-entity>
</a-scene>

<div class="footer">
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pull-left">
            <div class="onebleft">
                <button onclick="vidhandler.play()" class="btn btnskips">Play (CHROME)</button>
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pull-right">
            <div class="onebright">
                <button onclick="refrespage()" class="btn btnskips">Refresh</button>
            </div>
        </div>
    </div>
</div>
<style>
    .footer {
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        color: white;
    }

    .onebleft {
        padding: 5px 5px 5px 5px;
        margin: 5px 15px 5px 5px;
        float: left;
        z-index: 900000000000;
    }

    .onebright {
        padding: 5px 5px 5px 5px;
        margin: 5px 15px 5px 5px;
        float: right;
        z-index: 900000000000;
    }

    .imgon {
        width: 55px;
        height: 55px;
        background-color: white;
        padding: 3px 2px 2px 2px !important;
    }

    .imgss {
        width: 50px !important;
        height: 50px !important;
    }

    .imgname {
        font-size: 10px;
    }

    .header {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        color: white;
    }

    .oneleft {
        padding: 5px 5px 5px 5px;
        margin: 5px 15px 5px 5px;
        float: left;
        z-index: 900000000000;
    }

    body {
        margin: 0px;
        overflow: hidden;
    }

    .resets {
        background-color: rgba(51, 51, 51, 0.529);
        color: #fff;
        text-align: center;
        border-radius: 2px;
        height: 50px;
        padding: 10px 10px 10px 10px;
        position: fixed;
        top: 10px;
        text-align: center;
        z-index: 9000000000;
        bottom: 10px;
    }

    .btnskips {
        background: rgba(0, 0, 0, 0.433);
        color: white !important;
    }

    .btnskips:hover {
        background: rgb(197, 197, 197);
    }

    #arjsDebugUIContainer {
        display: none;
    }

    .a-enter-vr-button {
        display: none !important;
    }
</style>
</body>
</html>